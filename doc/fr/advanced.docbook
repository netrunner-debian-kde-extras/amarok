<chapter id="advanced-features">
<title
>Fonctionnalités avancées d'&amarok;</title>


<sect1 id="keybd-shortcuts">
<title
>Raccourcis clavier</title>

<para
>&amarok; utilise des raccourcis claviers comme la plupart des autres applications, en dessous il y a une liste de ces raccourcis et leurs actions respectives. Les raccourcis globaux peuvent être configurés en effectuant un clic droit sur la fenêtre du lecteur et en sélectionnant <guimenuitem
>Configurer les raccourcis globaux...</guimenuitem
>. Les raccourcis d'&amarok; peuvent être configurés en effectuant un clic droit sur la fenêtre de lecture et en sélectionnant <guimenuitem
>Configurer les raccourcis clavier...</guimenuitem
>.</para>

<tip
><para
>Vous pouvez assigner les touches multimédia pour qu'elle fonctionnent en tant que raccourcis d'&amarok;, en faisant de votre clavier le centre de contrôle d'&amarok;.</para
></tip>

<para
>Les raccourcis globaux sont :</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Combinaison de touches</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>X</keycap
></keycombo
></entry>
<entry
>Jouer</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>C</keycap
></keycombo
></entry>
<entry
>Pause</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>V</keycap
></keycombo
></entry>
<entry
>Arrêt</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>B</keycap
></keycombo
></entry>
<entry
>Piste suivante</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>Z</keycap
></keycombo
></entry>
<entry
>Piste précédente</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>PN_+</keycap
></keycombo
></entry>
<entry
>Monter le son</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>PN_-</keycap
></keycombo
></entry>
<entry
>Baisser le son</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
>&Maj;<keycap
>KP_Add</keycap
></keycombo
></entry>
<entry
>Avance Rapide</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Win</keycap
>&Maj;<keycap
>KP_Subtract</keycap
></keycombo
></entry>
<entry
>Retour Rapide</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>A</keycap
></keycombo
></entry>
<entry
>Ajouter un morceau</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>P</keycap
></keycombo
></entry>
<entry
>Afficher la liste de lecture</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>O</keycap
></keycombo
></entry>
<entry
>Activer l'affichage à l'écran</entry>
</row>

<row>
<entry
><keycombo
><keycap
>Démarrer</keycap
><keycap
>M</keycap
></keycombo
></entry>
<entry
>Muet</entry>
</row>

</tbody>
</tgroup>
</informaltable>

<para
>Les raccourcis &amarok; sont  :</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Combinaison de touches</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycombo
>&Ctrl;<keycap
>C</keycap
></keycombo
></entry>
<entry
>Copier</entry>
</row>

<row>
<entry
><keycombo
>&Ctrl;<keycap
>KP_Enter</keycap
></keycombo
></entry>
<entry
>Aller au morceau actuel</entry>
</row>

<row>
<entry
><keycombo
>&Ctrl;<keycap
>D</keycap
></keycombo
></entry>
<entry
>Ajouter les pistes sélectionnées à la liste de lecture</entry>
</row>

<row>
<entry
><keycombo
>&Ctrl;<keycap
>Q</keycap
></keycombo
></entry>
<entry
>Quitter</entry>
</row>

<row>
<entry
><keycombo
>&Ctrl;&Maj;<keycap
>Z</keycap
></keycombo
></entry>
<entry
>Refaire</entry>
</row>

<row>
<entry
><keycombo
>&Ctrl;<keycap
>S</keycap
></keycombo
></entry>
<entry
>Enregistrer la liste de lecture</entry>
</row>

<row>
<entry
><keycombo
>&Ctrl;<keycap
>A</keycap
></keycombo
></entry>
<entry
>Tout sélectionner</entry>
</row>

<row>
<entry
><keycombo
>&Ctrl;<keycap
>M</keycap
></keycombo
></entry>
<entry
>Afficher la barre de menus</entry>
</row>

<row>
<entry
><keycombo
>&Ctrl;<keycap
>H</keycap
></keycombo
></entry>
<entry
>Répéter la piste</entry>
</row>

<row>
<entry
><keycombo
>&Ctrl;<keycap
>Z</keycap
></keycombo
></entry>
<entry
>Annuler</entry>
</row>


</tbody>
</tgroup>
</informaltable>


<para
>Les raccourcis du navigateur de la liste de lecture sont :</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Combinaison de touches</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
><keycap
>Espace</keycap
></entry>
<entry
>Charger la liste de lecture</entry>
</row>

<row>
<entry
><keycap
>F2</keycap
></entry>
<entry
>Renommer la liste de lecture</entry>
</row>

<row>
<entry
><keycap
>Effacement</keycap
></entry>
<entry
>Supprimer la liste de lecture</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect1>

<sect1 id="the-dcop-interface">
<title
>L'interface DCOP</title>

<para
>L'interface DCOP d'amaroK vous fournit une façon simple de contrôler &amarok; avec vos scripts personnels.</para>

<para
>L'interface DCOP d'&amarok; a beaucoup de fonctions génériques qui peuvent être trouvées dans d'autres applications KDE. Cette section est divisée en six parties et décrit les appels DCOP de la collection ; du navigateur de contexte ; du lecteur ; de la liste de lecture ; du navigateur de listes de lecture et des scripts. Un exemple d'appel DCOP pour mettre en pause ressemblerait à : </para>

<para
><prompt
>&percnt;</prompt
>dcop amarok player pause</para>

<sect2 id="dcop-collection">
<title
>appels DCOP de la collection &amarok;</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Appels DCOP</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
>int totalAlbums()</entry>
<entry
>Retourne le nombre total d'albums dans la collection.</entry>
</row>

<row>
<entry
>int totalArtists()</entry>
<entry
>Retourne le nombre total d'artistes dans la collection.</entry>
</row>

<row>
<entry
>int totalCompilations()</entry>
<entry
>Retourne le nombre total de compilations dans la collection.</entry>
</row>

<row>
<entry
>int totalGenres()</entry>
<entry
>Retourne le nombre total de genres dans la collection.</entry>
</row>

<row>
<entry
>int totalTracks()</entry>
<entry
>Retourne le nombre total de pistes dans la collection.</entry>
</row>

<row>
<entry
>QString query( QString sql)</entry>
<entry
>Interroge la base de données avec du SQL.</entry>
</row>

<row>
<entry
>QStringList similarArtists( int artists )</entry>
<entry
>Retourne les artistes similaires aux pistes courantes, se limite à int artistes.</entry>
</row>

<row>
<entry
>void migrateFile( QString oldURL, QString newURL )</entry>
<entry
>Déplacer un fichier dans la collection en gardant intactes ses statistiques.</entry>
</row>

<row>
<entry
>void scanCollection()</entry>
<entry
>Analyser la collection.</entry>
</row>

<row>
<entry
>void scanCollectionChanges()</entry>
<entry
>Analyser les modifications de la collection seulement.</entry>
</row>


</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-context">
<title
>Appels DCOP du navigateur de contexte</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Appels DCOP</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
>void showCurrentTrack()</entry>
<entry
>Afficher la piste courante dans le navigateur de contexte.</entry>
</row>

<row>
<entry
>void showLyrics()</entry>
<entry
>Afficher l'onglet des paroles dans le navigateur de contexte.</entry>
</row>

<row>
<entry
>void showWiki()</entry>
<entry
>Afficher l'onglet Wikipédia dans le navigateur de contexte.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-player">
<title
>Appels DCOP du lecteur &amarok;</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Appels DCOP</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
>bool dynamicModeStatus()</entry>
<entry
>Retourner le mode de lecture dynamique.</entry>
</row>

<row>
<entry
>bool equalizerEnabled()</entry>
<entry
>Retourner l'état del'égaliseur.</entry>
</row>

<row>
<entry
>bool isPlaying()</entry>
<entry
>Retourner true si &amarok; joue un morceau.</entry>
</row>

<row>
<entry
>bool randomModeStatus()</entry>
<entry
>Retourner le mode aléatoire.</entry>
</row>

<row>
<entry
>bool repeatPlaylistStatus()</entry>
<entry
>Retourner l'état du mode répétition de la liste de lecture.</entry>
</row>

<row>
<entry
>bool repeatTrackStatus()</entry>
<entry
>Retourner l'état du mode répétition de la piste.</entry>
</row>

<row>
<entry
>int getVolume()</entry>
<entry
>Retourner le volume entre 0 et 100 %.</entry>
</row>

<row>
<entry
>int sampleRate()</entry>
<entry
>Retourner le taux d'échantillonage de la piste courante.</entry>
</row>

<row>
<entry
>int score()</entry>
<entry
>Retourner le score de la piste courante.</entry>
</row>

<row>
<entry
>int status()</entry>
<entry
>Retourner l'état du mode de lecture : 0 - stoppé, 1 - en pause, 2 - lecture;</entry>
</row>

<row>
<entry
>int trackCurrentTime()</entry>
<entry
>Retourner la position de la piste courante en millisecondes</entry>
</row>

<row>
<entry
>int trackPlayCounter()</entry>
<entry
>Retourner le conteur de lectures de la piste courante.</entry>
</row>

<row>
<entry
>int trackTotalTime()</entry>
<entry
>Retourner la durée de la piste en secondes.</entry>
</row>

<row>
<entry
>QString album()</entry>
<entry
>Retourner l'album de la piste courante.</entry>
</row>

<row>
<entry
>QString artist()</entry>
<entry
>Retourner l'artiste de la piste courante.</entry>
</row>

<row>
<entry
>QString bitrate()</entry>
<entry
>Retourner le bitrate de la piste courante.</entry>
</row>

<row>
<entry
>QString comment()</entry>
<entry
>Retourner le commentaire de la piste courante.</entry>
</row>

<row>
<entry
>QString coverImage()</entry>
<entry
>Retourner l'URL encodée de l'image de pochette de la piste courante. </entry>
</row>

<row>
<entry
>QString currentTime()</entry>
<entry
>Retourner la position de la piste courante ([h:]mm:ss format).</entry>
</row>

<row>
<entry
>QString encodedURL()</entry>
<entry
>Retourner l'URL encodée de la piste courante.</entry>
</row>

<row>
<entry
>QString engine()</entry>
<entry
>Retourner le moteur utilisé.</entry>
</row>

<row>
<entry
>QString genre()</entry>
<entry
>Retourner le genre de la piste courante.</entry>
</row>

<row>
<entry
>QString lyrics()</entry>
<entry
>Retourner les paroles de la piste courante.</entry>
</row>

<row>
<entry
>QString lyricsByPath( QString path )</entry>
<entry
>Retourner les paroles d'une chanson à partir de son emplacement.</entry>
</row>

<row>
<entry
>QString nowPlaying()</entry>
<entry
>Le titre du média couramment joué.</entry>
</row>

<row>
<entry
>QString path()</entry>
<entry
>Retourner l'emplacement non encodé de la piste courante.</entry>
</row>

<row>
<entry
>QString setContextStyle( QString )</entry>
<entry
>Définie le style CSS du navigateur de contexte.</entry>
</row>

<row>
<entry
>QString title()</entry>
<entry
>Retourner le titre de la piste courante.</entry>
</row>

<row>
<entry
>QString totalTime()</entry>
<entry
>Retourner la durée totale de la liste courante (au format [h:]mm:ss)</entry>
</row>

<row>
<entry
>QString track()</entry>
<entry
>Retourner le numéro de piste.</entry>
</row>

<row>
<entry
>QString type()</entry>
<entry
>Retourner le type de fichier.</entry>
</row>

<row>
<entry
>QString year()</entry>
<entry
>Retourner l'année de la piste courante.</entry>
</row>

<row>
<entry
>void configEqualizer()</entry>
<entry
>Afficher la fenêtre de configuration de l'égaliseur.</entry>
</row>

<row>
<entry
>void enableDynamicMode(bool enable)</entry>
<entry
>Activer ou désactiver le mode dynamique</entry>
</row>

<row>
<entry
>void enableOSD(bool enable)</entry>
<entry
>Afficher ou cacher l'OSD.</entry>
</row>

<row>
<entry
>void enableRandomMode(bool enable)</entry>
<entry
>Mettre le mode aléatoire sur on ou off.</entry>
</row>

<row>
<entry
>void enableRepeatPlaylist(bool enable)</entry>
<entry
>Activer ou désactiver la répétition de la liste de lecture</entry>
</row>

<row>
<entry
>void enableRepeatTrack(bool enable)</entry>
<entry
>Activer ou désactiver le mode de répétition de piste</entry>
</row>

<row>
<entry
>void mediaDeviceMount()</entry>
<entry
>Définir la commande utilisée pour monter un périphérique de média.</entry>
</row>

<row>
<entry
>void mediaDeviceUmount()</entry>
<entry
>Définir la commande utilisée pour libérer un périphérique de média.</entry>
</row>

<row>
<entry
>void mute()</entry>
<entry
>Activer ou désactiver le mode muet.</entry>
</row>

<row>
<entry
>void next()</entry>
<entry
>Équivalent au bouton « Morceau Suivant ».</entry>
</row>

<row>
<entry
>void pause()</entry>
<entry
>Équivalent au bouton « Pause ».</entry>
</row>

<row>
<entry
>void play()</entry>
<entry
>Équivalent au bouton « Lecture ».</entry>
</row>

<row>
<entry
>void playPause()</entry>
<entry
>Modifier l'état lecture/pause (utile pour les utilisateurs de claviers multimédia). </entry>
</row>

<row>
<entry
>void prev()</entry>
<entry
>Équivalent au bouton « Morceau Précédent ».</entry>
</row>

<row>
<entry
>void queueForTransfer( KURL url )</entry>
<entry
>Mettre le fichier en attente pour être transféré au périphérique de média.</entry>
</row>

<row>
<entry
>void seek(int s)</entry>
<entry
>Aller à la position de la piste donnée en secondes.</entry>
</row>

<row>
<entry
>void seekRelative(int s)</entry>
<entry
>Avancer du nombre de secondes données dans la piste.</entry>
</row>

<row>
<entry
>void setEqualizer(int, int, int, int, int, int, int, int, int, int, int)</entry>
<entry
>Définir les bandes de l'égaliseur. </entry>
</row>

<row>
<entry
>void setEqualizerEnabled( bool active )</entry>
<entry
>Activer ou désactiver l'égaliseur.</entry>
</row>

<row>
<entry
>void setEqualizerPreset( QString name )</entry>
<entry
>Définir le preset de l'égaliseur. </entry>
</row>

<row>
<entry
>void setLyricsByPath( QString url, QString lyrics )</entry>
<entry
>Définir les paroles d'une chanson par son emplacement.</entry>
</row>

<row>
<entry
>void setScore( int score )</entry>
<entry
>Définir le score de la piste courante.</entry>
</row>

<row>
<entry
>void setScoreByPath( QString url, int score )</entry>
<entry
>Définir le score d'une piste par son emplacement.</entry>
</row>

<row>
<entry
>void setVolume(int volume)</entry>
<entry
>Définir le volume de 0 à 100 %.</entry>
</row>

<row>
<entry
>void showBrowser( QString browser )</entry>
<entry
>Afficher le navigateur dans la fenêtre de la liste de lecture.</entry>
</row>

<row>
<entry
>void showOSD()</entry>
<entry
>Afficher l'OSD à l'écran.</entry>
</row>

<row>
<entry
>void stop()</entry>
<entry
>Équivalent au bouton « Stop ».</entry>
</row>

<row>
<entry
>void transferDeviceFiles()</entry>
<entry
>Transfèrer les fichiers au périphérique de média.</entry>
</row>

<row>
<entry
>void volumeDown()</entry>
<entry
>Baisser le volume avec un pas raisonnable.</entry>
</row>

<row>
<entry
>void volumeUp()</entry>
<entry
>Augmenter le volume avec un pas raisonnable.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-playlist">
<title
>Appels DCOP de la liste de lecture</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Appels DCOP</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
>int getActiveIndex()</entry>
<entry
>Retourner l'index de la piste courante, -1 si il n'y en a pas.</entry>
</row>

<row>
<entry
>int getTotalTrackCount()</entry>
<entry
>Retourner le nombre de pistes dans la liste de lecture.</entry>
</row>

<row>
<entry
>QString saveCurrentPlaylist()</entry>
<entry
>Enregistrer la liste de lecture courante en xml et retourne son emplacement.</entry>
</row>

<row>
<entry
>void addMedia( KURL )</entry>
<entry
>Ajouter un média audio spécifiés par l'URL.</entry>
</row>

<row>
<entry
>void addMediaList( KURL::List )</entry>
<entry
>Ajouter des média audio spécifiés par l'URL.</entry>
</row>

<row>
<entry
>void clearPlaylist()</entry>
<entry
>Vide la liste de lecture.</entry>
</row>

<row>
<entry
>void playByIndex(int)</entry>
<entry
>Lance la lecture de la piste se trouvant à l'index spécifié.</entry>
</row>

<row>
<entry
>void playMedia( KURL )</entry>
<entry
>Ajouter un média audio spécifiés par l'URL.</entry>
</row>

<row>
<entry
>void popupMessage( QString)</entry>
<entry
>Affiche un message popup temporaire.</entry>
</row>

<row>
<entry
>void removeCurrentTrack()</entry>
<entry
>Retourne la piste courante de la liste de lecture.</entry>
</row>

<row>
<entry
>void repopulate()</entry>
<entry
>Repeuple la liste de lecture avec des morceaux aléatoires.</entry>
</row>

<row>
<entry
>void saveM3u( QString path, bool relativePaths)</entry>
<entry
>Enregistre la liste de lecture courante en m3u.</entry>
</row>

<row>
<entry
>void setStopAfterCurrent( bool )</entry>
<entry
>Active ou désactive l'arrêt après la piste courante.</entry>
</row>

<row>
<entry
>void shortStatusMessage( QString)</entry>
<entry
>Affiche un message temporaire dans la barre d'état.</entry>
</row>

<row>
<entry
>void shufflePlaylist()</entry>
<entry
>Mets les pistes de la liste de lecture dans un ordre aléatoire.</entry>
</row>

<row>
<entry
>void togglePlaylist()</entry>
<entry
>Affiche ou cache la fenêtre de la liste de lecture.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-playlistbrowser">
<title
>Appels DCOP du navigateur de listes de lecture.</title>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Appels DCOP</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
>void addPodcast( QString )</entry>
<entry
>Ajouter un podcast au navigateur de listes de lecture.</entry>
</row>

<row>
<entry
>void scanPodcasts()</entry>
<entry
>Vérifier si les podcasts ont été mis à jour.</entry>
</row>

<row>
<entry
>void addPlaylist( QString )</entry>
<entry
>Ajouter une liste de lecture au navigateur de listes de lecture.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect2>

<sect2 id="dcop-script">
<title
>Appels DCOP de scripts.</title>


<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Appels DCOP</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
>bool runScript( QString name)</entry>
<entry
>Démarre le script dont le nom est passé en argument. Retourne true si tout fonctionne normalement.</entry>
</row>

<row>
<entry
>bool stopScript( QString name)</entry>
<entry
>Stoppe le script dont le nom est passé en argument. Retourne true si tout s'est bien déroulé.</entry>
</row>

<row>
<entry
>QStringList listRunningScripts()</entry>
<entry
>Retourne une liste de tous les scripts en cours d'exécution.</entry>
</row>

<row>
<entry
>void addCustomMenuItem(QString submenu, QString itemTitle )</entry>
<entry
>Active et définit un élément personnalisé de menu.</entry>
</row>

<row>
<entry
>void removeCustomMenuItem(QString submenu, QString itemTitle )</entry>
<entry
>Retire l'élément de menu personnalisé.</entry>
</row>

<row>
<entry
>QString readConfig( QString key)</entry>
<entry
>Retourne une entrée de configuration AmarokConfig à partir de la clé spécifiée.</entry>
</row>

</tbody>
</tgroup>
</informaltable>


</sect2>

</sect1>

<sect1 id="cmd-line-options">
<title
>Options en ligne de commande</title>

<para
>&amarok; prend en charge l'utilisation des options de ligne de commande Qt et KDE standard. &amarok; a aussi ses options spécifiques.</para>

<para
>Les options Qt et KDE :</para>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Option</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
>--help</entry>
<entry
>Afficher l'aide à propos des options.</entry>
</row>

<row>
<entry
>--help-qt</entry>
<entry
>Afficher les options spécifiques à Qt.</entry>
</row>

<row>
<entry
>--help-kde</entry>
<entry
>Afficher les options spécifiques à KDE.</entry>
</row>

<row>
<entry
>--help-all</entry>
<entry
>Afficher toutes les options.</entry>
</row>

<row>
<entry
>--author</entry>
<entry
>Afficher les informations sur l'auteur.</entry>
</row>

<row>
<entry
>-v, --version</entry>
<entry
>Afficher les informations sur la version.</entry>
</row>

<row>
<entry
>--license</entry>
<entry
>Afficher les informations sur la licence.</entry>
</row>

</tbody>
</tgroup>
</informaltable>

<para
>Les options d'&amarok; :</para>

<note
><para
>Les options &amarok; sont faites pour être utilisées quand &amarok; est en fonctionnement.</para
></note>

<informaltable>
<tgroup cols="2">
<thead>

<row>
<entry
>Option</entry>
<entry
>Action</entry>
</row>
</thead>
<tbody>

<row>
<entry
>-r, --previous</entry>
<entry
>Revenir à la piste précédente dans la liste de lecture.</entry>
</row>

<row>
<entry
>-p, --play</entry>
<entry
>Démarrer la lecture de la piste actuelle.</entry>
</row>

<row>
<entry
>-s, --stop</entry>
<entry
>Arrêter la lecture.</entry>
</row>

<row>
<entry
>--pause</entry>
<entry
>Mettre en pause la lecture.</entry>
</row>

<row>
<entry
>-f, --next</entry>
<entry
>Aller à la piste suivante dans la liste de lecture.</entry>
</row>

<row>
<entry
>-a, --append</entry>
<entry
>Ajouter des fichiers / URLs à la liste de lecture.</entry>
</row>

<row>
<entry
>-e, --enqueue</entry>
<entry
>Voir append, disponible pour la compatibilité avec d'autres outils.</entry>
</row>

<row>
<entry
>--queue</entry>
<entry
>Mettre en queue des fichiers / URLs après la piste actuellement jouée.</entry>
</row>

<row>
<entry
>-m, --toggle-playlist-window</entry>
<entry
>Basculer vers la fenêtre de la liste de lecture.</entry>
</row>

<row>
<entry
>--wizard</entry>
<entry
>Lancer l'assistant à la première utilisation.</entry>
</row>

<row>
<entry
>--engine « nom »</entry>
<entry
>Démarrer &amarok; avec le moteur « nom ».</entry>
</row>

</tbody>
</tgroup>
</informaltable>

</sect1>


<sect1 id="script-writing">
<title
>Écriture de script</title>

<para
>L'écriture de scripts vous permet de facilement étendre les fonctionnalités d'&amarok; sans avoir à modifier le code principal. Les scripts sont similaires à des modules externes, excepté qu'à la place d'une interface de programmation de module externe dédiée, ils utilisent les interfaces DCOP d'&amarok; pour communiquer. Cela rend possible l'écriture de scripts à l'aide de pratiquement tous les langages de programmation, comme Ruby, Python ou PHP. Vous pouvez non seulement créer des scripts à l'aide de langages de scripts classiques, mais également à l'aide de langages compilés tels que C++ ou C. De plus, &amarok; peut notifier les scripts lors d'évènements spéciaux et les faire réagir en conséquence. Ce système de notification sera détaillé plus loin dans cette section.</para>

<sect2 id="script-bindings">
<title
>Bindings (liaisons)</title>

<para
>Il est facile d'écrire des scripts simples qui ne nécessitent pas d'interagir avec un utilisateur, et il est également possible de créer des scripts possédant une interface utilisateur graphique qui agissent comme de petites applications indépendantes. Pour la programmation d'interfaces utilisateur graphique une des nombreuses bibliothèques de liaisons fournis par KDE peut être utilisé, par exemple RubyQt, une librairie Qt de liaison pour Ruby. Cependant, il est important de noter que tous les utilisateurs ne possèdent pas toutes les librairies de liaisons installées. Si vous décider d'utiliser une librairie de liaison, essayer d'utiliser une de celles qui sont très répandues (&pex; RubyQt ou PyQt).</para>

<para
>Avec pour objectif de fournir un retour d'expérience lorsqu'un script ne peut pas être exécuté en raison d'une dépendance non remplie, merci de vérifier dans votre script si le module que vous voulez inclure existe réellement. Si la dépendance est manquante, vous devriez relever l'erreur et présenter une boîte de dialogue d'information en utilisant l'outil en ligne de commande « kdialog », ainsi l'utilisateur découvrira pourquoi il est impossible d'exécuter le script.</para>

<para
>Cet exemple montre comment détecter une dépendance manquante en Ruby.</para>

<programlisting
>begin
       require 'Korundum'
rescue LoadError
       error = 'Korundum (KDE bindings for ruby) from kdebindings v3.4 is required for this script.'
       `kdialog --sorry '#{error}'`
       exit
end
</programlisting>

</sect2>

<sect2 id="script-templates">
<title
>Bien démarrer : les modèles</title>

<para
>&amarok; fourni des modèles de scripts pour plusieurs langages dans le dossier <filename class="directory"
>scripts/template</filename
>. Vous pouvez utiliser ces scripts comme base pour vos propre scripts, et leurs adjoindre les fonctionnalités dont vous avez besoin. </para>

</sect2>

<sect2 id="script-controlling-amarok">
<title
>Contrôler &amarok; avec DCOP</title>

<para
>Les scripts peuvent contrôler Amarok en appelant certaines de ces fonctions DCOP. La manière la plus simple d'appeler un fonction DCOP est d'utiliser l'utilitaire en ligne de commande « DCOP » qui fait parti de toute distribution KDE.</para>

<para
>Voici un exemple pour augmenter le volume principal : </para>

<programlisting
>dcop amarok player volumeUp</programlisting>

<para
>La plupart des langages de scripts permettent l'exécution de programmes externes, à l'aide d'une fonction comme exec(). Ainsi l'utilitaire « dcop » peut être appelé simplement. Voici un exemple simple en Python :</para>

<programlisting
>import os
 os.system("dcop amarok player volumeDown")
</programlisting>

</sect2>

<sect2 id="script-notifications">
<title
>Notifications</title>

<para
>&amarok; envoi des notifications à tous les scripts en cours d'exécution en écrivant des chaînes de caractères dans leurs canaux stdin. Les scripts devraient en conséquences surveiller en permanence stdin, et réagir en conséquence à chacun des événements possibles. Les scripts pourraient également choisir d'ignorer tout événement dont ils n'ont pas besoin.</para>

<para
>Les notifications suivantes sont envoyées par &amarok; :</para>

<programlisting
><cmdsynopsis
><command
>configure</command
></cmdsynopsis>
Demande au script d'afficher sa boîte de dialogue de configuration. Le script doit
prendre en charge l'enregistrement et le chargement des options de
configuration par lui même. Lorsqu'un script est exécuté, Amarok configure
sont dossier de travail pour que cela soit celui dans lequel toutes les données
devraient être stockées.
</programlisting>

<programlisting
><cmdsynopsis
><command
>engineStateChange:</command
><arg
>empty|idle|paused|playing</arg
></cmdsynopsis>
Signal une modification d'état du moteur.
</programlisting>

<programlisting
><cmdsynopsis
><command
>trackChange</command
></cmdsynopsis>
Signal le démarrage d'une nouvelle piste. Le script devrait alors utiliser
les fonctions DCOP pour demander d'autres informations concernant
la piste, &pex; les méta-données et la durée.
</programlisting>

<programlisting
><cmdsynopsis
><command
>volumeChange</command
><arg
>newVolume</arg
></cmdsynopsis>
Signal une modification du niveau sonore principale. Le volume est un entier 
compris entre 0 et 100.
</programlisting>

<programlisting
><cmdsynopsis
><command
>customMenuClicked:</command
><arg
>submenu itemTitle paths</arg
></cmdsynopsis>
Renvoi l'emplacement des fichiers sélectionnés dans la liste de lecture
lorsque l'élément du menu contextuel est sélectionné. Le sous menu et
le titre de l'élément sont également renvoyés pour raison d'identification
dans le cas ou un script serait à l'écoute pour des notifications multiples.
Pour insérer un élément dans le menu contextuel utilisez l'appel DCOP
« dcop amarok script addCustomMenuItem( submenu itemTitle) ».
Pour supprimer un élément du menu contextuel utilisez l'appel DCOP
« dcop amarok script removeCustomMenuItem( submenu itemTitle) ». 
</programlisting>

</sect2>

<sect2 id="script-termination">
<title
>Arrêt des scripts</title>

<para
>Avant la fermeture d'&amarok;, ou lorsque l'utilisateur arrête un script l'aide du gestionnaire de script, &amarok; envoi le signal SIGTERM au script. Ce signal peut être capturé pour faire un travail de nettoyage, comme l'enregistrement de données ou de réglages.</para>

</sect2>

<sect2 id="script-packaging">
<title
>Mise en paquetage</title>

<para
>Le gestionnaire de script d'&amarok; est en mesure d'installer des scripts empaquetés que l'utilisateur a téléchargé depuis un serveur web. Les paquetages sont simplement des archives (.tar) optionnellement compressées à l'aide de bzip2 (.bz2). Nous recommandons fortement l'utilisation d'un nom de fichier du type monscript.amarokscript.tar.bz2, pour que l'utilisateur puisse facilement identifier le paquetage comme un script Amarok.</para>

<note
><para
>&amarok; 1.3 acceptera uniquement des scripts empaquetés possédant l'extension amarokscript, c'est pourquoi il est plus simple de l'utiliser dès le début.</para
></note>

<para
>Le contenu de l'archive doit être organisé de la manière suivante :</para>

<programlisting
>myscript/
   README
   myscript.py (executable)
   somemodule.py
   foo.data
   ...
</programlisting>

</sect2>

<sect2 id="script-permissions">
<title
>Permissions des fichiers</title>

<para
>Le script principal doit être exécutable, tandis que les modules additionnels que le script peut chargé ne devraient pas l'être. Pour conserver les permissions dans l'archive vous devriez utiliser tar avec l'option -p :</para>

<programlisting
>tar -cf myscript.amarokscript.tar -p myscript</programlisting>

<note
><para
>&amarok; ne sera pas capable d'installer le script si les permissions ne sont pas correctement définies.</para
></note>

</sect2>

<sect2 id="script-distributing">
<title
>Distribution</title>

<para
>Lorsque le paquetage est terminé, vous pouvez l'envoyer sur <ulink url="http://www.kde-apps.org"
>www.kde-apps.org</ulink
> (en anglais), et ajouter le lien sur la <ulink url="http://amarok.kde.org/amarokwiki/index.php/Scripts"
>Page des scripts en Wiki</ulink
> d'&amarok;. Pour la page de kde-apps vous pouvez utiliser la catégorie <ulink url="http://kde-apps.org/index.php?xcontentmode=56"
>Scripts pour &amarok; (&amarok; Scripts en anglais)</ulink
>.</para>

</sect2>

</sect1>


</chapter>

